
---
# HX Infrastructure - Main Variables
# Central variable definitions for the entire infrastructure

# Project Information
project:
  name: "HX Infrastructure"
  version: "1.0.0"
  description: "Enterprise Infrastructure Automation Platform"
  repository: "https://github.com/hanax-ai/HX-Infrastructure-Ansible"
  documentation: "https://github.com/hanax-ai/HX-Infrastructure-Ansible/docs"
  support_email: "support@hanax-ai.com"

# Infrastructure Topology
infrastructure:
  total_servers: 15
  tiers:
    load_balancer:
      count: 2
      purpose: "Traffic distribution and SSL termination"
      technology: "nginx + keepalived"
    web:
      count: 3
      purpose: "Static content serving and reverse proxy"
      technology: "nginx"
    application:
      count: 3
      purpose: "Business logic processing"
      technology: "Configurable runtime"
    database:
      count: 3
      purpose: "Data persistence (1 master, 2 replicas)"
      technology: "PostgreSQL 15"
    cache:
      count: 2
      purpose: "High-performance caching (1 master, 1 replica)"
      technology: "Redis 7.x"
    monitoring:
      count: 2
      purpose: "System observability and logging"
      technology: "Prometheus + Grafana + ELK"

# Network Architecture
network:
  architecture: "multi-tier"
  zones:
    dmz:
      description: "Demilitarized Zone"
      subnets:
        load_balancer: "10.0.1.0/24"
        web: "10.0.2.0/24"
    private:
      description: "Private Network"
      subnets:
        application: "10.0.3.0/24"
        database: "10.0.4.0/24"
        cache: "10.0.5.0/24"
        monitoring: "10.0.6.0/24"
    management:
      description: "Management Network"
      subnets:
        admin: "10.0.10.0/24"

# Service Ports
ports:
  web:
    http: 80
    https: 443
  application:
    primary: 8080
    management: 8081
    health: 8082
  database:
    postgresql: 5432
    postgresql_replication: 5433
  cache:
    redis: 6379
    redis_sentinel: 26379
  monitoring:
    prometheus: 9090
    grafana: 3000
    alertmanager: 9093
    node_exporter: 9100
    postgres_exporter: 9187
    redis_exporter: 9121
  logging:
    elasticsearch: 9200
    kibana: 5601
    logstash: 5044
    beats: 5045

# Technology Versions
versions:
  os:
    ubuntu: "20.04"
    rhel: "8"
  web:
    nginx: "1.24"
  application:
    java: "17"
    python: "3.9"
    nodejs: "18"
  database:
    postgresql: "15"
    mysql: "8.0"
  cache:
    redis: "7.0"
  monitoring:
    prometheus: "2.45"
    grafana: "10.0"
    elasticsearch: "8.8"
    kibana: "8.8"
    logstash: "8.8"
  tools:
    ansible: "2.15"
    docker: "24.0"
    kubernetes: "1.27"

# Security Configuration
security:
  encryption:
    at_rest: true
    in_transit: true
    algorithms:
      - "AES-256-GCM"
      - "ChaCha20-Poly1305"
  authentication:
    methods:
      - "ssh_key"
      - "certificate"
    multi_factor: true
  authorization:
    rbac_enabled: true
    principle: "least_privilege"
  compliance:
    standards:
      - "CIS Benchmarks"
      - "NIST Cybersecurity Framework"
      - "SOC 2"
      - "ISO 27001"
  hardening:
    os_hardening: true
    network_hardening: true
    application_hardening: true
    database_hardening: true

# Performance Configuration
performance:
  caching:
    levels:
      - "CDN"
      - "Reverse Proxy"
      - "Application"
      - "Database"
    strategies:
      - "LRU"
      - "LFU"
      - "TTL"
  load_balancing:
    algorithms:
      - "round_robin"
      - "least_connections"
      - "ip_hash"
      - "weighted_round_robin"
  scaling:
    horizontal: true
    vertical: true
    auto_scaling: true
    metrics:
      - "cpu_utilization"
      - "memory_utilization"
      - "request_rate"
      - "response_time"

# High Availability Configuration
high_availability:
  redundancy:
    level: "N+1"
    cross_zone: true
  failover:
    automatic: true
    detection_time: "30s"
    recovery_time: "2m"
  backup:
    frequency: "daily"
    retention: "30d"
    testing: "weekly"
  disaster_recovery:
    rto: "15m"  # Recovery Time Objective
    rpo: "5m"   # Recovery Point Objective

# Monitoring and Alerting
monitoring:
  metrics:
    collection_interval: "15s"
    retention: "90d"
    aggregation: true
  logging:
    centralized: true
    structured: true
    retention: "30d"
  alerting:
    channels:
      - "email"
      - "slack"
      - "pagerduty"
    severity_levels:
      - "critical"
      - "warning"
      - "info"
  dashboards:
    infrastructure: true
    application: true
    business: true

# Deployment Configuration
deployment:
  strategies:
    - "rolling_update"
    - "blue_green"
    - "canary"
  automation:
    ci_cd: true
    testing: true
    validation: true
  environments:
    - "development"
    - "staging"
    - "production"
  rollback:
    automatic: true
    conditions:
      - "health_check_failure"
      - "error_rate_threshold"

# Backup and Recovery
backup:
  types:
    - "full"
    - "incremental"
    - "differential"
  storage:
    local: true
    remote: true
    cloud: true
  encryption: true
  compression: true
  verification: true
  testing:
    frequency: "weekly"
    automation: true

# Cost Optimization
cost_optimization:
  resource_rightsizing: true
  auto_shutdown: true
  reserved_instances: true
  spot_instances: false
  monitoring: true

# Development and Testing
development:
  environments:
    local: true
    shared: true
    ephemeral: true
  testing:
    unit: true
    integration: true
    e2e: true
    performance: true
    security: true
  ci_cd:
    pipeline: true
    automation: true
    quality_gates: true

# Documentation
documentation:
  architecture: true
  runbooks: true
  api_reference: true
  user_guides: true
  troubleshooting: true
  change_logs: true

# Support and Maintenance
support:
  levels:
    - "L1: Basic Support"
    - "L2: Advanced Support"
    - "L3: Expert Support"
  channels:
    - "email"
    - "chat"
    - "phone"
  sla:
    response_time: "4h"
    resolution_time: "24h"
  maintenance:
    scheduled: true
    emergency: true
    windows:
      - "Sunday 02:00-04:00 UTC"
